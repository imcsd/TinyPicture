# TinyPicture 使用说明

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 开发模式运行

**方式 1：一键启动（推荐）**
```bash
npm run dev
```

这将同时启动：
- Vite 开发服务器（端口 5173）
- Electron 应用窗口

**方式 2：手动分别启动**
```bash
# 终端 1：启动 Vite 开发服务器
npm run dev:vite

# 终端 2：等 Vite 启动后，启动 Electron
npx electron .
```

### 3. 构建 Windows 应用

```bash
# 需要以管理员权限运行终端
npm run build:win
```

构建完成后，安装包将在 `dist` 目录中。

**注意事项：**
- 首次构建需要以管理员权限运行（用于创建符号链接）
- 或者启用 Windows 开发者模式（设置 → 开发者选项）

## 使用步骤

### 1. 选择路径
- 点击"浏览"按钮选择原图文件夹
- 选择输出文件夹（压缩后的图片保存位置）

### 2. 调整压缩设置

#### 图片质量
- 拖动滑块调整质量（0-100）
- 推荐值：75-85
- 质量越高，体积越大，但画质越好

#### 分辨率限制
- **保持原始分辨率**：不改变图片尺寸
- **限制最大边长**：等比例缩放到指定尺寸
  - 4K (3840px)
  - 2K (2560px)
  - Full HD (1920px)
  - HD (1280px)
  - 自定义

#### 输出格式
- **保持原格式**：JPEG 保持 JPEG，PNG 保持 PNG
- **转换为 WebP**：所有图片转换为 WebP 格式（体积更小）

#### 高级选项
- **保留原有 EXIF 信息**：保留照片的元数据（拍摄时间、相机信息等）
- **自动补全缺失的拍摄时间**：使用文件修改时间填充缺失的 EXIF 拍摄时间
- **保持原文件修改时间**：压缩后的文件保持与原文件相同的修改时间

### 3. 预估压缩效果

点击"开始预估"按钮：
- 系统会随机采样 5-10 张图片进行试压缩
- 显示预计压缩后的总大小和节省空间
- 如果检测到图片缺少 EXIF 拍摄时间，会弹出提示

### 4. 开始压缩

点击"开始压缩"按钮：
- 显示实时进度条
- 显示当前正在处理的文件
- 显示已节省的空间

### 5. 完成

压缩完成后会显示统计信息：
- 成功/失败数量
- 原始大小 vs 压缩后大小
- 节省空间和压缩率

## 支持的图片格式

- JPEG / JPG
- PNG
- WebP
- TIFF / TIF
- GIF（静态）
- AVIF

## 注意事项

1. **备份重要文件**：压缩前建议备份原始图片
2. **输出路径**：不要选择与输入路径相同的文件夹
3. **磁盘空间**：确保输出路径有足够的磁盘空间
4. **大文件处理**：超大图片（>50MB）处理时间较长，请耐心等待

## 常见问题

### Q: 压缩会改变分辨率吗？
A: 默认不会。只有在启用"限制最大边长"时才会调整分辨率。

### Q: 压缩后图片质量会下降吗？
A: 质量设置在 75-85 时，肉眼几乎看不出差别。低于 70 可能出现明显失真。

### Q: 为什么有些图片压缩失败？
A: 可能原因：
- 文件损坏
- 不支持的图片格式
- 文件被占用
- 磁盘空间不足

### Q: EXIF 信息会丢失吗？
A: 如果勾选"保留原有 EXIF 信息"，会尽可能保留。但转换格式时可能丢失部分特殊字段。

### Q: 可以取消正在进行的压缩吗？
A: 目前版本暂不支持中途取消，此功能将在后续版本中添加。

## 技术支持

如有问题或建议，请访问：
- GitHub: [TinyPicture](https://github.com/yourusername/tinypicture)
- Issues: [提交问题](https://github.com/yourusername/tinypicture/issues)
